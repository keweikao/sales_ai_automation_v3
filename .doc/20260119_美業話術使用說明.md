# 美業話術使用說明

> **功能**: 銷售話術庫 - 支援產品線差異化
> **使用場景**: Slack Bot `/talktrack` 指令、Sales Coach Agent、MCP Tools

---

## 📚 話術系統概覽

話術系統提供**情境化的銷售話術建議**,協助業務人員應對客戶異議和不同銷售情境。

### 核心功能

1. **情境分類** - 5 種常見銷售情境
2. **產品線差異化** - iCHEF 和美業話術分開管理
3. **成功率追蹤** - 記錄話術使用次數和成功率
4. **多種查詢方式** - 情境查詢、關鍵字搜尋

---

## 🎯 5 種銷售情境

| 情境 | 說明 | 關鍵字 |
|------|------|--------|
| **價格異議** | 客戶認為太貴 | 價格、太貴、成本 |
| **需要老闆決定** | 需要向上請示 | 老闆、決策、做不了主 |
| **擔心轉換麻煩** | 害怕換系統太複雜 | 轉換、麻煩、換系統 |
| **已有其他系統** | 已使用競品 | 競品、其他系統、已經用 |
| **要再考慮** | 需要時間思考 | 考慮、想想、再說 |

---

## 💼 產品線差異化

### iCHEF (餐飲業)

**話術重點**:
- 營業額、翻桌率、客單價
- POS 系統效能、結帳速度
- 人工對帳耗時、發票管理
- ROI 計算、人力成本節省

**範例話術** (價格異議):
```
"我理解價格是重要的考量。讓我們來算一下，如果每天能省下 30 分鐘的結帳時間，
一個月就是 15 小時。以您的時薪來算，這個投資大約 X 個月就能回本。"
```

### Beauty (美業)

**話術重點** (Agent E 需建立):
- 客戶留存率、預約填滿率
- 設計師產值、服務品質
- 預約管理混亂、客戶流失
- 行銷自動化、會員經營

**範例話術** (價格異議 - 待建立):
```
"我理解您的考量。讓我們算一下，如果能減少 20% 的 No-show，
每月可以多服務幾位客人？這些收益很快就能回本。"
```

---

## 🔧 使用方式

### 1. Slack Bot `/talktrack` 指令

業務人員可在 Slack 直接查詢話術:

```bash
# 情境查詢
/talktrack 價格        # 查看價格異議話術
/talktrack 老闆        # 查看需要老闆決定話術
/talktrack 轉換        # 查看轉換麻煩話術
/talktrack 競品        # 查看競品話術
/talktrack 考慮        # 查看要再考慮話術

# 關鍵字搜尋
/talktrack 搜尋 ROI    # 搜尋包含 ROI 的話術
/talktrack 搜尋 試用   # 搜尋包含試用的話術

# 幫助
/talktrack help        # 顯示幫助訊息
```

**查詢結果**:
- 最多顯示 3 筆話術
- 按成功率和使用次數排序
- 包含情境說明、預期效果、統計資訊

### 2. Sales Coach Agent (MCP Tool)

在 MEDDIC 分析後,Sales Coach Agent 可提供話術建議:

```typescript
// MCP Tool: get_talk_tracks
{
  "situation": "價格異議",
  "customerType": "精算型"  // 可選
}

// 返回
{
  "talkTracks": [
    {
      "content": "...",
      "context": "適用於計算導向的客戶",
      "successRate": 72,
      "usageCount": 156
    }
  ],
  "bestPractice": "處理價格異議時,先認同客戶的考量..."
}
```

### 3. API 查詢

```typescript
// GET /api/talk-tracks?situation=價格異議&productLine=beauty
const talkTracks = await api.getTalkTracksBySituation('價格異議', 'beauty');

// 搜尋
const results = await api.searchTalkTracks('ROI', 'beauty');
```

---

## 📊 資料結構

### Database Schema

```sql
CREATE TABLE talk_tracks (
  id TEXT PRIMARY KEY,
  situation TEXT NOT NULL,          -- 5 種情境之一
  product_line TEXT DEFAULT 'ichef' NOT NULL,  -- 產品線
  customer_type TEXT,                -- 客戶類型 (可選)
  store_type TEXT,                   -- 店型 (可選)
  talk_track TEXT NOT NULL,          -- 話術內容
  context TEXT,                      -- 使用情境說明
  expected_outcome TEXT,             -- 預期效果
  success_rate INTEGER,              -- 成功率 (0-100)
  usage_count INTEGER DEFAULT 0,    -- 使用次數
  tags TEXT[],                       -- 標籤
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);

CREATE INDEX idx_talk_tracks_product_line ON talk_tracks(product_line);
CREATE INDEX idx_talk_tracks_situation ON talk_tracks(situation);
```

### TypeScript Interface

```typescript
interface TalkTrack {
  id: string;
  situation: TalkTrackSituation;  // '價格異議' | '需要老闆決定' | ...
  productLine: ProductLine;       // 'ichef' | 'beauty'
  customerType?: string;          // '衝動型' | '精算型' | '保守觀望型'
  storeType?: string;
  talkTrack: string;
  context?: string;
  expectedOutcome?: string;
  successRate?: number;
  usageCount: number;
  tags?: string[];
}
```

---

## 🎨 產品線配置

### iCHEF 配置

```typescript
// packages/shared/src/product-configs/ichef.ts
export const ichefConfig: ProductLineConfig = {
  // ...
  talkTracks: {
    situations: ['價格異議', '需要老闆決定', ...],
    defaultStoreTypes: ['咖啡廳', '飲料店', '餐廳', ...],
    focusMetrics: ['營業額', '翻桌率', '人力成本'],
  }
};
```

### Beauty 配置

```typescript
// packages/shared/src/product-configs/beauty.ts
export const beautyConfig: ProductLineConfig = {
  // ...
  talkTracks: {
    situations: ['價格異議', '需要老闆決定', ...],
    defaultStoreTypes: ['美髮沙龍', '美甲店', '美容SPA', ...],
    focusMetrics: ['客戶留存率', '預約填滿率', '設計師產值'],
  }
};
```

---

## 📝 Agent E 任務: 美業話術資料

### 需要建立的內容

**目標**: 建立 20 筆美業專屬話術 (每個情境 4 筆)

**資料格式**:
```typescript
const beautyTalkTracks = [
  {
    situation: '價格異議',
    productLine: 'beauty',
    storeType: '美髮沙龍',
    talkTrack: '我理解您的考量。讓我們算一下...',
    context: '適用於重視 ROI 的老闆',
    expectedOutcome: '讓客戶看到實際效益',
    successRate: 75,
    usageCount: 0,  // 新話術從 0 開始
    tags: ['ROI', '計算', '客戶留存']
  },
  // ... 共 20 筆
];
```

**5 個情境 × 4 筆話術 = 20 筆**:
- 價格異議 (4 筆)
- 需要老闆決定 (4 筆)
- 擔心轉換麻煩 (4 筆)
- 已有其他系統 (4 筆)
- 要再考慮 (4 筆)

### Seed 腳本

```typescript
// packages/db/src/seed/talk-tracks-beauty.ts
import { db, talkTracks } from '@Sales_ai_automation_v3/db';

async function seedBeautyTalkTracks() {
  for (const track of beautyTalkTracks) {
    await db.insert(talkTracks).values({
      id: crypto.randomUUID(),
      ...track,
    });
  }
  
  console.log(`✅ 已建立 ${beautyTalkTracks.length} 筆美業話術`);
}

seedBeautyTalkTracks();
```

---

## 🔄 使用流程

### 完整流程圖

```
業務人員在 Slack
    ↓
/talktrack 價格 (在美業 Channel)
    ↓
Slack Bot 解析 Channel → productLine = 'beauty'
    ↓
API: getTalkTracksBySituation('價格異議', 'beauty')
    ↓
DB: SELECT * FROM talk_tracks 
    WHERE situation = '價格異議' 
    AND product_line = 'beauty'
    ORDER BY success_rate DESC, usage_count DESC
    ↓
返回 3 筆美業話術
    ↓
Slack 顯示話術 (含成功率、使用次數)
    ↓
業務人員使用話術
    ↓
(可選) 記錄使用結果 → 更新 success_rate
```

---

## 📈 統計與分析

### 成功率計算

```sql
-- 更新話術成功率
UPDATE talk_tracks
SET 
  success_rate = (successful_uses / NULLIF(usage_count, 0) * 100),
  updated_at = NOW()
WHERE id = :track_id;
```

### 熱門話術查詢

```sql
-- 查詢最常用的美業話術
SELECT 
  situation,
  talk_track,
  usage_count,
  success_rate
FROM talk_tracks
WHERE product_line = 'beauty'
ORDER BY usage_count DESC
LIMIT 10;
```

### 成功率排行

```sql
-- 查詢成功率最高的話術
SELECT 
  situation,
  talk_track,
  success_rate,
  usage_count
FROM talk_tracks
WHERE product_line = 'beauty' AND usage_count > 5
ORDER BY success_rate DESC
LIMIT 10;
```

---

## 🎯 最佳實踐

### 話術撰寫原則

1. **具體而非空泛**
   - ❌ "我們的系統很好用"
   - ✅ "平均可節省每天 30 分鐘的預約管理時間"

2. **數據導向**
   - ❌ "很多客戶都滿意"
   - ✅ "使用後客戶留存率提升 25%"

3. **情境化**
   - 針對不同店型、客戶類型提供不同話術
   - 美髮沙龍 vs 美甲店 vs 美容 SPA

4. **同理心**
   - 先認同客戶的顧慮
   - 再提供解決方案

### 使用建議

1. **業務人員**
   - 遇到異議時立即查詢相關話術
   - 不要死背,理解邏輯後用自己的話說
   - 使用後回報效果,幫助優化話術

2. **管理者**
   - 定期檢視話術成功率
   - 淘汰低效話術,新增高效話術
   - 分享成功案例

---

## 📚 相關文件

### 技術文件
- DB Schema: `packages/db/src/schema/talk-tracks.ts`
- API Router: `packages/api/src/routers/talk-track.ts`
- Slack Bot: `apps/slack-bot/src/commands/talk-track.ts`
- MCP Tool: `packages/services/src/mcp/tools/get-talk-tracks.ts`

### 開發指南
- Agent E 指南: `.doc/multi-product-line-guides/05_Agent_E_Dashboard.md`

---

## 🚀 下一步: Agent E 開發

**任務**: 建立美業話術資料 (20 筆)

**產出**:
1. `packages/db/src/seed/talk-tracks-beauty.ts` - 美業話術資料
2. Seed 執行腳本
3. 話術品質驗證

**時間**: 3-4 小時

---

**建立日期**: 2026-01-19  
**文件版本**: v1.0
