# Sales AI Automation V3 - å¯¦æˆ° Agent æ¶æ§‹è¨­è¨ˆ

## é›¶ã€æ ¸å¿ƒç›®æ¨™

> **å¹«åŠ© iCHEF æ¥­å‹™åœ¨ã€Œä¸€æ¬¡æ€§ Demoã€ä¸­å–å¾—ã€Œæ‰¿è«¾äº‹ä»¶ã€(CE)**
> **è®“æ¥­å‹™å°ˆæ³¨é¢å°å®¢æˆ¶ï¼Œè€Œéè™•ç†è³‡æ–™å’Œå›æ†¶ç´°ç¯€**

æ‰¿è«¾äº‹ä»¶ï¼šCE1 (é ç´„å®‰è£) â†’ CE2 (æäº¤èœå–®) â†’ CE3 (ç°½ç´„ä»˜æ¬¾)

---

## ä¸€ã€å¾ã€Œåˆ†æã€åˆ°ã€Œè¡Œå‹•ã€çš„æ€ç¶­è½‰è®Š

### ç›®å‰å•é¡Œï¼šPipeline ç”¢å‡ºã€Œå ±å‘Šã€ï¼Œä¸æ˜¯ã€Œè¡Œå‹•ã€

```
ç›®å‰æµç¨‹ï¼ˆè³‡è¨Šå°å‘ï¼‰ï¼š
Transcript â†’ 6å€‹åˆ†æ â†’ ä¸€ä»½é•·å ±å‘Š â†’ æ¥­å‹™è‡ªå·±æƒ³ä¸‹ä¸€æ­¥

æˆ‘å€‘éœ€è¦çš„ï¼ˆè¡Œå‹•å°å‘ï¼‰ï¼š
Transcript â†’ Agent ç†è§£æƒ…æ³ â†’ ç›´æ¥å‘Šè¨´æ¥­å‹™ã€Œç¾åœ¨åšé€™ä»¶äº‹ã€
```

### æ¥­å‹™çœŸæ­£éœ€è¦çš„

| æ™‚æ©Ÿ | æ¥­å‹™éœ€è¦ä»€éº¼ | ç›®å‰ç³»çµ±æä¾› | æ‡‰è©²æä¾› |
|------|-------------|-------------|---------|
| Demo çµæŸå¾Œ 5 åˆ†é˜ | ã€Œç¾åœ¨æ‰“é›»è©±èªªä»€éº¼ã€ | ä¸€ä»½åˆ†æå ±å‘Š | **3 å¥è©±è¡“ + æœ€ä½³æ™‚æ©Ÿ** |
| éš”å¤©æ—©ä¸Š | ã€Œé€™å€‹å®¢æˆ¶è¦æ€éº¼è¿½ã€ | æŸ¥çœ‹ç³»çµ±æ‰¾å ±å‘Š | **Slack æ¨æ’­æé†’** |
| é€±æœƒå‰ | ã€Œæˆ‘é€™é€±è¡¨ç¾å¦‚ä½•ã€ | è‡ªå·±ç®—æ•¸æ“š | **è‡ªå‹•ç”¢ç”Ÿé€±å ±** |

---

## äºŒã€å¯¦æˆ° Agent æ¶æ§‹ï¼ˆä½¿ç”¨ MCP + Tool Useï¼‰

### æ¶æ§‹ç¸½è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Sales Coach Agent (ä¸» Agent)                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ç›®æ¨™ï¼šåˆ†æå°è©±ï¼Œç”¢ç”Ÿå¯ç›´æ¥åŸ·è¡Œçš„å»ºè­°                              â”‚
â”‚  èƒ½åŠ›ï¼šä½¿ç”¨ Tools æŸ¥è©¢è³‡æ–™ã€åˆ†æå…§å®¹ã€ç”¢ç”Ÿè¡Œå‹•                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  MCP Server â”‚         â”‚  Tools      â”‚
            â”‚  (è³‡æ–™å­˜å–)  â”‚         â”‚  (åˆ†æèƒ½åŠ›) â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MCP Serverï¼šè³‡æ–™å­˜å–å±¤

```typescript
// packages/services/src/mcp/sales-mcp-server.ts

const salesMcpServer = {
  name: "sales-ai-mcp",

  resources: [
    // è®“ Agent å¯ä»¥è®€å–çš„è³‡æ–™
    {
      uri: "postgres://conversations",
      name: "æ­·å²å°è©±ç´€éŒ„",
      description: "æŸ¥è©¢éå»çš„éŠ·å”®å°è©±å’Œåˆ†æçµæœ"
    },
    {
      uri: "postgres://meddic_analyses",
      name: "MEDDIC åˆ†æçµæœ",
      description: "æŸ¥è©¢éå»çš„ MEDDIC è©•åˆ†å’Œè¶¨å‹¢"
    },
    {
      uri: "postgres://alerts",
      name: "è­¦ç¤ºç´€éŒ„",
      description: "æŸ¥è©¢éå»çš„è­¦ç¤ºå’Œè™•ç†çµæœ"
    }
  ],

  tools: [
    // ============================================
    // å·¥å…· 1ï¼šæŸ¥è©¢ç›¸ä¼¼æ¡ˆä¾‹
    // ============================================
    {
      name: "query_similar_cases",
      description: "æ ¹æ“šå®¢æˆ¶é¡å‹å’Œé¡§æ…®ï¼Œæ‰¾å‡ºéå»æˆåŠŸæˆäº¤çš„ç›¸ä¼¼æ¡ˆä¾‹",
      inputSchema: {
        type: "object",
        properties: {
          customerType: {
            type: "string",
            enum: ["è¡å‹•å‹", "ç²¾ç®—å‹", "ä¿å®ˆè§€æœ›å‹"],
            description: "å®¢æˆ¶é¡å‹"
          },
          concern: {
            type: "string",
            description: "å®¢æˆ¶çš„ä¸»è¦é¡§æ…®ï¼Œä¾‹å¦‚ï¼šåƒ¹æ ¼ã€è½‰æ›é›£åº¦ã€å“¡å·¥è¨“ç·´"
          },
          storeType: {
            type: "string",
            description: "åº—å‹ï¼šcafe/beverage/hotpot/restaurant ç­‰"
          }
        },
        required: ["customerType", "concern"]
      }
    },

    // ============================================
    // å·¥å…· 2ï¼šå–å¾—æ¥­å‹™æ­·å²è¡¨ç¾
    // ============================================
    {
      name: "get_rep_performance",
      description: "å–å¾—è©²æ¥­å‹™éå»çš„è¡¨ç¾æ•¸æ“šï¼Œç”¨æ–¼å°æ¯”å’Œå»ºè­°",
      inputSchema: {
        type: "object",
        properties: {
          repId: { type: "string", description: "æ¥­å‹™ ID" },
          period: {
            type: "string",
            enum: ["last_7_days", "last_30_days", "last_quarter"],
            description: "æŸ¥è©¢æœŸé–“"
          }
        },
        required: ["repId"]
      }
    },

    // ============================================
    // å·¥å…· 3ï¼šæŸ¥è©¢æœ€ä½³è©±è¡“
    // ============================================
    {
      name: "get_best_talk_tracks",
      description: "æ ¹æ“šæƒ…å¢ƒæŸ¥è©¢éå»é«˜æˆäº¤ç‡çš„è©±è¡“ç¯„ä¾‹",
      inputSchema: {
        type: "object",
        properties: {
          situation: {
            type: "string",
            enum: [
              "åƒ¹æ ¼ç•°è­°",
              "éœ€è¦è€é—†æ±ºå®š",
              "æ“”å¿ƒè½‰æ›éº»ç…©",
              "å·²æœ‰å…¶ä»–ç³»çµ±",
              "è¦å†è€ƒæ…®"
            ],
            description: "å®¢æˆ¶çš„æƒ…å¢ƒ"
          },
          customerType: {
            type: "string",
            description: "å®¢æˆ¶é¡å‹"
          }
        },
        required: ["situation"]
      }
    },

    // ============================================
    // å·¥å…· 4ï¼šç™¼é€è­¦ç¤º
    // ============================================
    {
      name: "send_alert",
      description: "ç™¼é€å³æ™‚è­¦ç¤ºåˆ° Slack",
      inputSchema: {
        type: "object",
        properties: {
          type: {
            type: "string",
            enum: ["close_now", "missing_dm", "manager_escalation"],
            description: "è­¦ç¤ºé¡å‹"
          },
          severity: {
            type: "string",
            enum: ["high", "medium", "low"]
          },
          message: { type: "string", description: "è­¦ç¤ºè¨Šæ¯" },
          suggestedAction: { type: "string", description: "å»ºè­°è¡Œå‹•" },
          conversationId: { type: "string" }
        },
        required: ["type", "severity", "message", "suggestedAction"]
      }
    },

    // ============================================
    // å·¥å…· 5ï¼šæ’ç¨‹è·Ÿé€²æé†’
    // ============================================
    {
      name: "schedule_follow_up",
      description: "æ’ç¨‹ Slack æé†’ï¼Œåœ¨æœ€ä½³æ™‚æ©Ÿé€šçŸ¥æ¥­å‹™è·Ÿé€²",
      inputSchema: {
        type: "object",
        properties: {
          timing: {
            type: "string",
            enum: ["2_hours", "tomorrow_9am", "3_days", "1_week"],
            description: "æé†’æ™‚é–“"
          },
          channel: {
            type: "string",
            enum: ["slack_dm", "slack_channel"],
            description: "æé†’æ–¹å¼"
          },
          message: { type: "string", description: "æé†’å…§å®¹" },
          talkTrack: { type: "string", description: "å»ºè­°è©±è¡“" }
        },
        required: ["timing", "message"]
      }
    }
  ]
};
```

### Agent å¯¦ä½œï¼šä½¿ç”¨ Tool Use

```typescript
// packages/services/src/agent/sales-coach-agent.ts

import { GoogleGenerativeAI } from "@google/generative-ai";

const SALES_COACH_SYSTEM_PROMPT = `
ä½ æ˜¯ iCHEF çš„ AI éŠ·å”®æ•™ç·´ã€‚ä½ çš„ç›®æ¨™æ˜¯å¹«åŠ©æ¥­å‹™æˆäº¤ã€‚

## ä½ çš„å·¥ä½œæµç¨‹

1. **åˆ†æå°è©±** - ç†è§£å®¢æˆ¶ç‚ºä»€éº¼æ²’æˆäº¤
2. **æŸ¥è©¢è³‡æ–™** - ç”¨å·¥å…·æ‰¾å‡ºç›¸ä¼¼æ¡ˆä¾‹å’Œæœ€ä½³è©±è¡“
3. **ç”¢ç”Ÿè¡Œå‹•** - çµ¦å‡ºå…·é«”ã€å¯åŸ·è¡Œçš„ä¸‹ä¸€æ­¥

## é—œéµåŸå‰‡

- **è¡Œå‹•å„ªå…ˆ**ï¼šä¸è¦çµ¦å ±å‘Šï¼Œçµ¦è¡Œå‹•
- **å…·é«”è©±è¡“**ï¼šä¸è¦èªªã€Œå»ºè­°è·Ÿé€²ã€ï¼Œçµ¦å‡ºã€Œæ‰“é›»è©±èªªï¼šç‹è€é—†ï¼Œæ˜¨å¤©...ã€
- **æœ€ä½³æ™‚æ©Ÿ**ï¼šå‘Šè¨´æ¥­å‹™ã€Œç¾åœ¨ã€é‚„æ˜¯ã€Œæ˜å¤©æ—©ä¸Š 9 é»ã€

## è¼¸å‡ºæ ¼å¼

æ°¸é ç”¨é€™å€‹æ ¼å¼å›è¦†ï¼š

### ğŸ¯ ç«‹å³è¡Œå‹•
[ä¸€ä»¶ç¾åœ¨è¦åšçš„äº‹]

### ğŸ’¬ å»ºè­°è©±è¡“
ã€Œ[å¯ä»¥ç›´æ¥è¤‡è£½ä½¿ç”¨çš„è©±è¡“]ã€

### â° è·Ÿé€²è¨ˆç•«
- [æ™‚é–“ 1]: [åšä»€éº¼]
- [æ™‚é–“ 2]: [åšä»€éº¼]

### âš ï¸ è­¦ç¤º
[å¦‚æœéœ€è¦ä¸»ç®¡ä»‹å…¥æˆ–æœ‰ç·Šæ€¥æ©Ÿæœƒï¼Œæ¨™è¨»å‡ºä¾†]
`;

export class SalesCoachAgent {
  private model: GoogleGenerativeAI;
  private tools: Tool[];

  constructor() {
    this.model = new GoogleGenerativeAI(process.env.GEMINI_API_KEY!);
    this.tools = this.defineTools();
  }

  async analyze(transcript: string, metadata: DemoMetadata): Promise<CoachingResult> {
    const chat = this.model.getGenerativeModel({
      model: "gemini-2.0-flash",
      tools: this.tools,
      systemInstruction: SALES_COACH_SYSTEM_PROMPT
    });

    // Agent æœƒè‡ªå·±æ±ºå®šè¦ç”¨å“ªäº›å·¥å…·
    const result = await chat.generateContent({
      contents: [{
        role: "user",
        parts: [{
          text: `
åˆ†æé€™é€šéŠ·å”®å°è©±ï¼Œç”¢ç”Ÿå¯åŸ·è¡Œçš„å»ºè­°ã€‚

## å°è©±å…§å®¹
${transcript}

## Demo è³‡è¨Š
- åº—å‹: ${metadata.storeType}
- æ±ºç­–è€…åœ¨å ´: ${metadata.decisionMakerOnsite ? "æ˜¯" : "å¦"}
- ç¾æœ‰ç³»çµ±: ${metadata.currentPos}
- æ¥­å‹™: ${metadata.repName}
`
        }]
      }]
    });

    // è™•ç†å·¥å…·å‘¼å«
    while (result.response.candidates[0].finishReason === "TOOL_CALL") {
      const toolCalls = result.response.candidates[0].content.parts
        .filter(part => part.functionCall);

      const toolResults = await Promise.all(
        toolCalls.map(call => this.executeTool(call.functionCall))
      );

      // ç¹¼çºŒå°è©±ï¼Œæä¾›å·¥å…·çµæœ
      result = await chat.generateContent({
        contents: [...previousContents, {
          role: "tool",
          parts: toolResults.map(r => ({ functionResponse: r }))
        }]
      });
    }

    return this.parseResult(result.response.text());
  }

  private async executeTool(call: FunctionCall): Promise<FunctionResponse> {
    switch (call.name) {
      case "query_similar_cases":
        return this.querySimilarCases(call.args);
      case "get_best_talk_tracks":
        return this.getBestTalkTracks(call.args);
      case "send_alert":
        return this.sendAlert(call.args);
      case "schedule_follow_up":
        return this.scheduleFollowUp(call.args);
      // ...
    }
  }
}
```

---

## ä¸‰ã€å…·é«”ä½¿ç”¨å ´æ™¯

### å ´æ™¯ 1ï¼šDemo å¾Œå³æ™‚æ•™ç·´

```
æ¥­å‹™ä¸Šå‚³éŸ³æª”
    â†“
Agent åˆ†æï¼šã€Œå®¢æˆ¶æ˜¯ç²¾ç®—å‹ï¼Œä¸»è¦é¡§æ…®æ˜¯åƒ¹æ ¼ã€
    â†“
Agent å‘¼å« query_similar_casesï¼šæ‰¾åˆ° 3 å€‹é¡ä¼¼æˆäº¤æ¡ˆä¾‹
    â†“
Agent å‘¼å« get_best_talk_tracksï¼šå–å¾—åƒ¹æ ¼ç•°è­°çš„æœ€ä½³è©±è¡“
    â†“
Agent ç”¢å‡ºï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¯ ç«‹å³è¡Œå‹•                                 â”‚
â”‚ 2 å°æ™‚å…§æ‰“é›»è©±çµ¦ç‹è€é—†                       â”‚
â”‚                                            â”‚
â”‚ ğŸ’¬ å»ºè­°è©±è¡“                                 â”‚
â”‚ ã€Œç‹è€é—†ï¼Œå‰›æ‰èŠåˆ°åƒ¹æ ¼çš„éƒ¨åˆ†ï¼Œæˆ‘æƒ³åˆ°ä¸€å€‹      â”‚
â”‚  æ–¹æ¡ˆï¼šæˆ‘å€‘æœ‰æ–°å®¢æˆ¶é¦–å­£ 85 æŠ˜æ–¹æ¡ˆï¼ŒåŠ ä¸Š        â”‚
â”‚  æ‚¨æ˜¯é–‹æ¥­å‹ï¼Œæˆ‘å¯ä»¥å¹«æ‚¨çˆ­å–å…è²»èœå–®å»ºç½®...ã€   â”‚
â”‚                                            â”‚
â”‚ â° è·Ÿé€²è¨ˆç•«                                 â”‚
â”‚ - ä»Šå¤© 17:00: æ‰“é›»è©±                        â”‚
â”‚ - æ˜å¤© 10:00: å¦‚æœªæ¥ï¼Œç™¼ç°¡è¨Š                 â”‚
â”‚ - 3 å¤©å¾Œ: æº–å‚™å ±åƒ¹å–®è¦ªè¨ª                     â”‚
â”‚                                            â”‚
â”‚ ğŸ“Š åƒè€ƒæ¡ˆä¾‹                                 â”‚
â”‚ é¡ä¼¼çš„ã€Œç²¾ç®—å‹å’–å•¡å»³ã€æ¡ˆä¾‹ï¼Œå¹³å‡ 2.3 æ¬¡       â”‚
â”‚ è·Ÿé€²å¾Œæˆäº¤ï¼ŒæˆåŠŸé—œéµæ˜¯ã€Œç®—çµ¦è€é—†çœ‹çœå¤šå°‘ã€    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å ´æ™¯ 2ï¼šClose Now è­¦ç¤º

```
Agent åˆ†æï¼šæ¨é€²åˆ†æ•¸ 85ï¼Œæ±ºç­–è€…åœ¨å ´ï¼Œå®¢æˆ¶å•äº†å®‰è£æ™‚é–“
    â†“
Agent å‘¼å« send_alertï¼š
  type: "close_now"
  severity: "high"
  message: "è€é—†åœ¨å ´ä¸”è©¢å•å®‰è£æ™‚é–“ï¼Œæˆäº¤æ©Ÿæœƒé«˜"
    â†“
Slack å³æ™‚æ¨æ’­çµ¦æ¥­å‹™å’Œä¸»ç®¡ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”¥ ç«‹å³æˆäº¤æ©Ÿæœƒï¼                           â”‚
â”‚                                            â”‚
â”‚ åº—åï¼šå¥½å–å’–å•¡                              â”‚
â”‚ ä¿¡è™Ÿï¼šè€é—†åœ¨å ´ã€è©¢å•å®‰è£æ™‚é–“ã€å°å ±è¡¨æ„Ÿèˆˆè¶£   â”‚
â”‚                                            â”‚
â”‚ å»ºè­°å‹•ä½œï¼š                                  â”‚
â”‚ ç¾åœ¨æ‰“é›»è©±ç¢ºèªå®‰è£æ™‚é–“ï¼Œè¶å°è±¡æ·±åˆ»           â”‚
â”‚                                            â”‚
â”‚ è©±è¡“ï¼š                                      â”‚
â”‚ ã€Œç‹è€é—†ï¼Œå‰›æ‰æ‚¨å•çš„å®‰è£æ™‚é–“ï¼Œä¸‹é€±äºŒä¸‹åˆ      â”‚
â”‚  å¯ä»¥å—ï¼Ÿæˆ‘å€‘å·¥ç¨‹å¸«å¯ä»¥...ã€                 â”‚
â”‚                                            â”‚
â”‚ [ğŸ“ æ’¥æ‰“é›»è©±] [ğŸ“… æ’ç¨‹è·Ÿé€²] [âœ“ å·²è™•ç†]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å ´æ™¯ 3ï¼šä¸»ç®¡é€±å ±

```
ä¸»ç®¡è¼¸å…¥ /report weekly
    â†“
Agent å‘¼å« get_rep_performanceï¼šå–å¾—åœ˜éšŠæ•¸æ“š
    â†“
Agent ç”¢å‡ºï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š æœ¬é€±éŠ·å”®è¡¨ç¾ï¼ˆ1/6 - 1/12ï¼‰               â”‚
â”‚                                            â”‚
â”‚ åœ˜éšŠç¸½è¦½                                    â”‚
â”‚ - Demo æ•¸é‡: 23 å ´                          â”‚
â”‚ - å¹³å‡ MEDDIC: 67 åˆ† (â†‘5%)                  â”‚
â”‚ - æˆäº¤ç‡: 34%                               â”‚
â”‚                                            â”‚
â”‚ æ¥­å‹™æ’å                                    â”‚
â”‚ 1. å°æ˜ - 8 å ´ Demo, 75 åˆ†, 50% æˆäº¤        â”‚
â”‚ 2. å°è¯ - 7 å ´ Demo, 68 åˆ†, 43% æˆäº¤        â”‚
â”‚ 3. å°ç‹ - 8 å ´ Demo, 58 åˆ†, 12% æˆäº¤ âš ï¸     â”‚
â”‚                                            â”‚
â”‚ âš ï¸ éœ€é—œæ³¨                                   â”‚
â”‚ å°ç‹é€£çºŒ 3 å ´ä½æ–¼ 60 åˆ†ï¼Œå»ºè­°ï¼š              â”‚
â”‚ - ä¸»å› ï¼šåƒ¹æ ¼ç•°è­°è™•ç†ä¸ä½³                     â”‚
â”‚ - å»ºè­°ï¼šæœ¬é€±æ—è½å°æ˜çš„ Demo                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››ã€èˆ‡ç›®å‰æ¶æ§‹çš„å·®ç•°

| é¢å‘ | ç›®å‰ 6-Agent Pipeline | æ–° Agent + MCP æ¶æ§‹ |
|------|----------------------|---------------------|
| **æŸ¥è©¢æ­·å²** | âŒ ç„¡æ³•æŸ¥è©¢ | âœ… Agent è‡ªå·±æ±ºå®šè¦æŸ¥ä»€éº¼ |
| **è©±è¡“å“è³ª** | é€šç”¨å»ºè­° | åŸºæ–¼ç›¸ä¼¼æ¡ˆä¾‹çš„å…·é«”è©±è¡“ |
| **è­¦ç¤ºæ™‚æ©Ÿ** | åˆ†æå®Œæ‰çŸ¥é“ | å³æ™‚åµæ¸¬ã€å³æ™‚æ¨æ’­ |
| **è·Ÿé€²ç®¡ç†** | æ¥­å‹™è‡ªå·±è¨˜ | ç³»çµ±è‡ªå‹•æ’ç¨‹æé†’ |
| **ä¸»ç®¡è¦–è§’** | è¦è‡ªå·±æŸ¥ | è‡ªå‹•ç”¢ç”Ÿé€±å ± |

---

## äº”ã€å¯¦ä½œæ­¥é©Ÿ

### éšæ®µ 1ï¼šå…ˆä¸Šç·šç›®å‰ç‰ˆæœ¬ï¼ˆæœ¬é€±ï¼‰
- ç›®å‰çš„ Pipeline å¯ç”¨
- æ¥­å‹™å¯ä»¥é–‹å§‹ä¸Šå‚³éŸ³æª”ã€å–å¾—åˆ†æ

### éšæ®µ 2ï¼šåŠ å…¥ MCP Toolsï¼ˆä¸‹é€±ï¼‰
1. å¯¦ä½œ `query_similar_cases` - æŸ¥è©¢è³‡æ–™åº«
2. å¯¦ä½œ `get_best_talk_tracks` - å»ºç«‹è©±è¡“åº«
3. å¯¦ä½œ `send_alert` - æ•´åˆ Slack æ¨æ’­
4. å¯¦ä½œ `schedule_follow_up` - æ•´åˆæ’ç¨‹ç³»çµ±

### éšæ®µ 3ï¼šå»ºç«‹è©±è¡“åº«ï¼ˆæŒçºŒï¼‰
- æ”¶é›†é«˜æˆäº¤æ¡ˆä¾‹çš„è©±è¡“
- æ¨™è¨»æƒ…å¢ƒå’Œæ•ˆæœ
- è®“ Agent å¯ä»¥æŸ¥è©¢å’Œå­¸ç¿’

---

## å…­ã€é¡å¤–è³‡æºéœ€æ±‚ï¼ˆæå‡ Agent èƒ½åŠ›ï¼‰

### 1. è©±è¡“çŸ¥è­˜åº«ï¼ˆæœ€é‡è¦ï¼‰

**ç›®çš„**ï¼šè®“ Agent å¯ä»¥æŸ¥è©¢ã€Œéå»æˆåŠŸæ¡ˆä¾‹æ€éº¼èªªçš„ã€

**éœ€è¦çš„è³‡æ–™**ï¼š
```typescript
// packages/db/src/schema/talk-tracks.ts
export const talkTracks = pgTable("talk_tracks", {
  id: text("id").primaryKey(),

  // æƒ…å¢ƒåˆ†é¡
  situation: text("situation").notNull(),        // "åƒ¹æ ¼ç•°è­°", "éœ€è¦è€é—†æ±ºå®š", "è½‰æ›é¡§æ…®"
  customerType: text("customer_type"),           // "è¡å‹•å‹", "ç²¾ç®—å‹", "ä¿å®ˆè§€æœ›å‹"
  storeType: text("store_type"),                 // "cafe", "restaurant", "beverage"

  // è©±è¡“å…§å®¹
  talkTrack: text("talk_track").notNull(),       // ã€Œç‹è€é—†ï¼Œé—œæ–¼åƒ¹æ ¼...ã€
  context: text("context"),                      // ä»€éº¼æƒ…æ³ä¸‹ä½¿ç”¨
  expectedOutcome: text("expected_outcome"),     // é æœŸæ•ˆæœ

  // ä¾†æºå’Œæ•ˆæœ
  sourceConversationId: text("source_conversation_id"),
  successRate: integer("success_rate"),          // ä½¿ç”¨é€™å¥è©±å¾Œçš„æˆäº¤ç‡
  usageCount: integer("usage_count"),            // è¢«ä½¿ç”¨æ¬¡æ•¸

  createdAt: timestamp("created_at").defaultNow(),
});
```

**è³‡æ–™ä¾†æº**ï¼š
- V2 çš„æ­·å²æˆäº¤å°è©±ï¼ˆéœ€è¦äººå·¥æ¨™è¨»é«˜åˆ†è©±è¡“ï¼‰
- æ¥­å‹™è‡ªå·±å›å ±ã€Œé€™å¥å¾ˆå¥½ç”¨ã€
- åˆ†æé«˜æˆäº¤æ¡ˆä¾‹è‡ªå‹•èƒå–

### 2. æ¥­å‹™æŠ€èƒ½æ¨™ç±¤

**ç›®çš„**ï¼šè®“ Agent å¯ä»¥çµ¦å‡ºã€Œé‡å°é€™å€‹æ¥­å‹™çš„å€‹äººåŒ–å»ºè­°ã€

**éœ€è¦çš„è³‡æ–™**ï¼š
```typescript
// packages/db/src/schema/rep-skills.ts
export const repSkills = pgTable("rep_skills", {
  id: text("id").primaryKey(),
  userId: text("user_id").notNull(),

  // æŠ€èƒ½è©•ä¼°
  skillArea: text("skill_area").notNull(),       // "ç•°è­°è™•ç†", "åƒ¹å€¼å‘ˆç¾", "æ”¶å°¾æŠ€å·§"
  score: integer("score"),                       // 1-100
  trend: text("trend"),                          // "improving", "stable", "declining"

  // å¼±é»å’Œå»ºè­°
  weakness: text("weakness"),                    // "åƒ¹æ ¼ç•°è­°è™•ç†æ™‚å¸¸é€€è®“"
  recommendation: text("recommendation"),        // "å¯åƒè€ƒå°æ˜çš„åšæ³•ï¼šå…ˆèªåŒå†è½‰æ›"

  updatedAt: timestamp("updated_at").defaultNow(),
});
```

**è³‡æ–™ä¾†æº**ï¼š
- å¾ MEDDIC åˆ†æä¸­è‡ªå‹•èƒå–
- ä¸»ç®¡æ‰‹å‹•æ¨™è¨»

### 3. ç«¶çˆ­å°æ‰‹è³‡è¨Šåº«

**ç›®çš„**ï¼šç•¶å®¢æˆ¶æåˆ°ç«¶å“æ™‚ï¼ŒAgent å¯ä»¥æä¾›é‡å°æ€§çš„å›æ‡‰

**éœ€è¦çš„è³‡æ–™**ï¼š
```typescript
// packages/db/src/schema/competitor-info.ts
export const competitorInfo = pgTable("competitor_info", {
  id: text("id").primaryKey(),
  competitorName: text("competitor_name").notNull(),  // "è‚šè‚š", "EZTABLE"

  // æ¯”è¼ƒè³‡è¨Š
  strengths: jsonb("strengths"),                      // ["åƒ¹æ ¼ä¾¿å®œ", "ä»‹é¢ç°¡å–®"]
  weaknesses: jsonb("weaknesses"),                    // ["å ±è¡¨åŠŸèƒ½å¼±", "å®¢æœæ…¢"]
  ourAdvantages: jsonb("our_advantages"),             // ["å ±è¡¨å¼·å¤§", "åœ¨åœ°å®¢æœ"]

  // æ‡‰å°è©±è¡“
  counterTalkTracks: jsonb("counter_talk_tracks"),    // é‡å°æ€§è©±è¡“
  switchingCases: jsonb("switching_cases"),           // æˆåŠŸè½‰æ›æ¡ˆä¾‹

  updatedAt: timestamp("updated_at").defaultNow(),
});
```

**è³‡æ–™ä¾†æº**ï¼š
- ç”¢å“åœ˜éšŠæä¾›ç«¶å“åˆ†æ
- å¾æˆåŠŸè½‰æ›æ¡ˆä¾‹ä¸­èƒå–

### 4. å¤–éƒ¨å·¥å…·æ•´åˆ

| å·¥å…· | ç”¨é€” | æ•´åˆæ–¹å¼ |
|------|------|----------|
| **Google Calendar** | è‡ªå‹•æ’ç¨‹è·Ÿé€²æé†’ | OAuth + Calendar API |
| **HubSpot/Salesforce** | åŒæ­¥ CRM è³‡æ–™ | API æ•´åˆ |
| **LINE å®˜æ–¹å¸³è™Ÿ** | ç™¼é€è·Ÿé€²è¨Šæ¯çµ¦å®¢æˆ¶ | LINE Messaging API |
| **é›»è©±ç³»çµ±** | Click-to-call åŠŸèƒ½ | Twilio æˆ–ç¾æœ‰ç³»çµ± |

### 5. å³æ™‚åˆ†æèƒ½åŠ›ï¼ˆé€²éšï¼‰

**ç›®çš„**ï¼šåœ¨ Demo é€²è¡Œä¸­å³æ™‚æä¾›å»ºè­°

**æŠ€è¡“éœ€æ±‚**ï¼š
- ä¸²æµéŸ³è¨Šè™•ç†ï¼ˆWhisper streamingï¼‰
- ä½å»¶é²åˆ†æï¼ˆ< 5 ç§’ï¼‰
- Slack å³æ™‚æ¨æ’­

**å ´æ™¯**ï¼š
```
æ¥­å‹™æ­£åœ¨ Demo
    â†“
å®¢æˆ¶èªªï¼šã€Œåƒ¹æ ¼æœ‰é»é«˜è€¶...ã€
    â†“
Agent å³æ™‚åµæ¸¬åˆ°åƒ¹æ ¼ç•°è­°
    â†“
Slack æ¨æ’­çµ¦æ¥­å‹™ï¼š
ã€ŒğŸ’¡ åƒ¹æ ¼ç•°è­°è™•ç†ï¼šå¯ä»¥å…ˆç®—çµ¦å®¢æˆ¶çœ‹çœå¤šå°‘äººåŠ›æˆæœ¬ã€
```

---

## ä¸ƒã€è³‡æºå„ªå…ˆç´š

| å„ªå…ˆç´š | è³‡æº | ç†ç”± |
|--------|------|------|
| P0 | è©±è¡“çŸ¥è­˜åº« | ç›´æ¥æå‡è©±è¡“å“è³ªï¼ŒROI æœ€é«˜ |
| P1 | V2 æ­·å²è³‡æ–™é·ç§» | æœ‰è³‡æ–™æ‰èƒ½æŸ¥è©¢ç›¸ä¼¼æ¡ˆä¾‹ |
| P2 | æ¥­å‹™æŠ€èƒ½æ¨™ç±¤ | è®“å»ºè­°æ›´å€‹äººåŒ– |
| P3 | ç«¶çˆ­å°æ‰‹è³‡è¨Šåº« | è™•ç†ç«¶å“æƒ…å¢ƒ |
| P4 | å¤–éƒ¨å·¥å…·æ•´åˆ | è‡ªå‹•åŒ–è·Ÿé€²æµç¨‹ |
| P5 | å³æ™‚åˆ†æ | æŠ€è¡“è¤‡é›œï¼Œå¯å¾Œåš |
