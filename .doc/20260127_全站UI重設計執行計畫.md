# Sales AI Web 全站 UI 重設計執行計畫

**日期**：2026-01-27
**專案**：Sales AI Automation V3
**負責人**：Claude Code (frontend-design skill)

---

## 一、設計系統概述

### 1.1 美學方向：Precision Dashboard（精密儀表板）

採用「高端汽車儀表板 × 金融終端機」的設計語言，強調數據的專業性與精準度。

**設計特點**：
- 深色主題優先
- 精密數據呈現
- 專業終端機美學
- 微妙動畫效果

### 1.2 色彩系統

#### 品牌強調色（青綠色系）
| 變數名稱 | 值 | 用途 |
|---------|-----|------|
| `--accent-primary` | `oklch(0.75 0.15 180)` | 主強調色 (teal-400) |
| `--accent-glow` | `oklch(0.65 0.15 180 / 0.3)` | 發光效果 |

#### 語意色彩
| 變數名稱 | 值 | 用途 |
|---------|-----|------|
| `--semantic-success` | `oklch(0.75 0.17 160)` | 成功/上升 (emerald-400) |
| `--semantic-danger` | `oklch(0.70 0.19 15)` | 危險/下降 (rose-400) |
| `--semantic-warning` | `oklch(0.80 0.16 85)` | 警告 (amber-400) |
| `--semantic-info` | `oklch(0.75 0.14 230)` | 資訊 (sky-400) |

#### 排名色彩
| 變數名稱 | 值 | 用途 |
|---------|-----|------|
| `--rank-gold` | `oklch(0.80 0.15 85)` | 第一名 |
| `--rank-silver` | `oklch(0.70 0.02 250)` | 第二名 |
| `--rank-bronze` | `oklch(0.70 0.14 50)` | 第三名 |

### 1.3 字體系統

| 用途 | 字體 | CSS 類別 | 說明 |
|------|------|----------|------|
| 標題 | Sora | `.font-display` | 幾何現代感，專業大氣 |
| 數據/數字 | IBM Plex Mono | `.font-data` | 等寬字體，終端機美學 |
| 內文 | Inter | 預設 | 系統預設，保持可讀性 |

### 1.4 動畫系統

#### fade-in-up（淡入上升）
```css
@keyframes fade-in-up {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}
```
- 用途：卡片載入、元素出現
- 持續時間：0.5s
- Stagger delay：100ms 間隔

#### progress-fill（進度條填充）
```css
@keyframes progress-fill {
  from { width: 0%; }
}
```
- 用途：進度條動畫
- 持續時間：0.8s
- 緩動函數：ease-out

#### pulse-glow（發光脈衝）
```css
@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 0 transparent; }
  50% { box-shadow: 0 0 20px var(--accent-glow); }
}
```
- 用途：強調元素
- 持續時間：2s
- 重複：infinite

#### shimmer（微光載入）
```css
@keyframes shimmer {
  from { background-position: -200% 0; }
  to { background-position: 200% 0; }
}
```
- 用途：骨架屏載入
- 持續時間：1.5s
- 重複：infinite

---

## 二、共用組件規格

### 2.1 StatCard（統計卡片）

**位置**：`apps/web/src/components/dashboard/stat-card.tsx`

**視覺規格**：
```
┌─────────────────────────────┐
│ ■  標題         [圖標]      │  ← 左側 4px 強調色邊條
│                             │
│    2,847                    │  ← IBM Plex Mono, text-3xl, font-bold
│    +12% ↑                   │  ← 變化徽章（綠色正/紅色負）
│    說明文字                  │  ← text-sm, text-muted
└─────────────────────────────┘
```

**Props 介面**：
```typescript
interface StatCardProps {
  title: React.ReactNode;
  value: string | number;
  description?: string;
  icon: React.ComponentType<{ className?: string }>;
  change?: number;
  loading?: boolean;
  accentColor?: 'teal' | 'emerald' | 'rose' | 'amber' | 'purple';
  delay?: number;
}
```

**互動效果**：
- 懸浮：`translateY(-4px)` + 邊框發光
- 載入：skeleton shimmer

### 2.2 ProgressBar（進度條）

**位置**：`apps/web/src/components/dashboard/progress-bar.tsx`

**視覺規格**：
- 高度：8px（預設）
- 背景：`slate-700`
- 填充：漸層 + 發光效果
- 圓角：`rounded-full`

**Props 介面**：
```typescript
interface ProgressBarProps {
  value: number;
  max?: number;
  color?: 'teal' | 'emerald' | 'rose' | 'amber' | 'purple' | 'sky' | 'violet';
  showValue?: boolean;
  animated?: boolean;
  label?: React.ReactNode;
  size?: 'sm' | 'md' | 'lg';
}
```

### 2.3 RankingList（排名列表）

**位置**：`apps/web/src/components/dashboard/ranking-list.tsx`

**視覺規格**：
- 前三名：金/銀/銅色背景漸層
- 排名徽章：圓形，`w-8 h-8`
- 懸浮：`translateX(4px)` + 背景變亮

**Props 介面**：
```typescript
interface RankingItem {
  id: string;
  name: string;
  value: number;
  subtext?: string;
  trend?: 'up' | 'down' | 'stable';
  needsAttention?: boolean;
}

interface RankingListProps {
  items: RankingItem[];
  valueLabel?: string;
  onItemClick?: (item: RankingItem) => void;
}
```

### 2.4 PageHeader（頁面標題）

**位置**：`apps/web/src/components/layout/page-header.tsx`

**視覺規格**：
- 標題：Sora 字體，`text-3xl font-bold`
- 副標題：`text-muted-foreground`
- 右側：操作按鈕區

---

## 三、頁面重設計規格

### 3.1 /reports（報告頁）

**檔案**：`apps/web/src/routes/reports/index.tsx`

**主要變更**：

1. **移除 inline styles**
   - 刪除 `<style>` 標籤內約 1800 行 CSS
   - 改用 Tailwind classes + CSS 變數

2. **重構 Tabs 組件**
   - 移除手動 DOM 操作（`querySelectorAll`, `setAttribute`）
   - 使用 shadcn/ui `<Tabs>` 組件
   - 藥丸形狀標籤設計

3. **統計卡片**
   - 替換為新 `StatCard` 組件
   - 6 欄網格佈局

4. **PDCM/SPIN 進度條**
   - 替換為新 `ProgressBar` 組件
   - 維度標籤 + 權重徽章

5. **排名列表**
   - 替換為新 `RankingList` 組件

### 3.2 /opportunities（機會列表）

**檔案**：`apps/web/src/routes/opportunities/index.tsx`

**主要變更**：

1. **表格樣式**
   - 斑馬紋行背景
   - 懸浮高亮效果
   - 更緊湊的內邊距

2. **分數顯示**
   - SPIN/PDCM 分數使用新 `ProgressBar`

3. **搜尋框**
   - 更圓潤的設計
   - Focus 時發光效果

4. **分頁器**
   - 現代化設計
   - 頁碼指示器

### 3.3 /dashboard（儀表板）

**檔案**：`apps/web/src/routes/dashboard.tsx`

**主要變更**：

1. **用戶資訊卡片**
   - 新設計樣式
   - Avatar 區域

2. **對話列表**
   - 卡片式佈局
   - 狀態徽章優化

3. **空狀態**
   - 新設計插圖
   - 引導性文字

### 3.4 /todos（待辦事項）

**檔案**：`apps/web/src/routes/todos/index.tsx`

**主要變更**：

1. **日曆組件**
   - 深色主題適配
   - 待辦數量指示點

2. **待辦卡片**
   - 左側狀態色彩條
   - 逾期/今日/待辦 不同視覺

3. **篩選按鈕**
   - 藥丸形狀標籤組
   - 數量徽章

4. **Dialog 樣式**
   - 統一深色主題

---

## 四、檔案清單

### 新增檔案
| 檔案路徑 | 說明 |
|---------|------|
| `apps/web/src/components/dashboard/stat-card.tsx` | 統計卡片組件 |
| `apps/web/src/components/dashboard/progress-bar.tsx` | 進度條組件 |
| `apps/web/src/components/dashboard/ranking-list.tsx` | 排名列表組件 |
| `apps/web/src/components/layout/page-header.tsx` | 頁面標題組件 |

### 修改檔案
| 檔案路徑 | 修改內容 |
|---------|---------|
| `apps/web/package.json` | 新增 @fontsource/sora, @fontsource/ibm-plex-mono |
| `apps/web/src/index.css` | 新增 CSS 變數、動畫、字體類別 |
| `apps/web/src/routes/reports/index.tsx` | 報告頁 UI 重設計 |
| `apps/web/src/routes/opportunities/index.tsx` | 機會列表 UI 重設計 |
| `apps/web/src/routes/dashboard.tsx` | 儀表板 UI 重設計 |
| `apps/web/src/routes/todos/index.tsx` | 待辦頁 UI 重設計 |

---

## 五、實施順序

### Phase 1：設計系統基礎（預估：30 分鐘）
1. ✅ 安裝字體依賴
2. 更新 `index.css` 新增 CSS 變數和動畫

### Phase 2：共用組件（預估：1 小時）
1. 建立 `stat-card.tsx`
2. 建立 `progress-bar.tsx`
3. 建立 `ranking-list.tsx`
4. 建立 `page-header.tsx`

### Phase 3：頁面重設計（預估：3 小時）
1. `/reports` 頁面（最複雜，約 1.5 小時）
2. `/opportunities` 頁面（約 30 分鐘）
3. `/dashboard` 頁面（約 30 分鐘）
4. `/todos` 頁面（約 30 分鐘）

### Phase 4：測試驗證（預估：30 分鐘）
1. 執行 `bun x ultracite check`
2. 本地運行測試
3. 響應式測試

---

## 六、驗證檢查清單

### 功能驗證
- [ ] `/reports` 標籤切換正常
- [ ] `/reports` 統計卡片資料顯示正確
- [ ] `/reports` PDCM/SPIN 進度條動畫
- [ ] `/reports` 排名列表懸浮效果
- [ ] `/reports` 用戶選擇器（經理權限）
- [ ] `/opportunities` 表格資料顯示
- [ ] `/opportunities` 搜尋功能
- [ ] `/opportunities` 分頁功能
- [ ] `/dashboard` 用戶資訊顯示
- [ ] `/dashboard` 對話列表
- [ ] `/todos` 日曆選擇
- [ ] `/todos` 待辦卡片操作
- [ ] `/todos` 篩選功能

### 視覺驗證
- [ ] 深色主題一致性
- [ ] 動畫流暢度
- [ ] 響應式佈局（桌面/平板/手機）
- [ ] 字體正確載入

### 程式碼品質
- [ ] `bun x ultracite check` 無錯誤
- [ ] 無 TypeScript 錯誤
- [ ] 無 console 警告

---

## 七、風險與備案

### 潛在風險
1. **字體載入失敗**：使用 fallback 字體
2. **動畫效能問題**：提供 `prefers-reduced-motion` 支援
3. **API 資料結構變更**：保持向後相容

### 回滾計畫
如需回滾，可使用 git 還原到此次變更前的 commit。

---

**文件結束**
